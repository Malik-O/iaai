# IAAI Auction Data Scraper

## نظرة عامة

هذا المشروع عبارة عن واجهة برمجة تطبيقات (API) مبنية باستخدام Node.js وExpress لاستخلاص بيانات من موقع IAAI للمزادات. يستخدم المشروع Puppeteer للتحكم في متصفح ويب مقنع للوصول إلى بيانات المزادات واستخراجها.

## المميزات

- استخلاص قائمة السيارات من صفحة البحث الرئيسية
- استخلاص تفاصيل سيارة محددة من صفحة تفاصيل السيارة
- معالجة متقدمة لاستخراج البيانات مع آليات متعددة للتوافق مع هيكل الصفحة
- واجهة مستخدم بسيطة للتفاعل مع API
- دعم تحميل الكوكيز من ملف خارجي للتعامل مع مواقع تتطلب تسجيل الدخول

## المتطلبات الأساسية

- Node.js (v14+)
- NPM أو Yarn
- وصول إلى الإنترنت

## التثبيت

1. استنساخ المستودع:
```bash
git clone https://github.com/yourusername/iaai-scraper.git
cd iaai-scraper
```

2. تثبيت التبعيات:
```bash
npm install
```

3. تشغيل الخادم:
```bash
npm start
```

الخادم سيعمل على المنفذ 3000 افتراضيًا. يمكنك تغيير رقم المنفذ عبر متغير البيئة `PORT`.

## استخدام API

### استخراج قائمة السيارات

```
GET /scrape_iaai
```

**الاستجابة**:
```json
{
  "message": "Scraping successful",
  "totalItems": 20,
  "pagesScraped": 1,
  "data": [
    {
      "title": "2019 TOYOTA CAMRY",
      "link": "https://www.iaai.com/VehicleDetail/12345~US",
      "price": "$12,500",
      "image": "https://example.com/image.jpg"
    },
    ...
  ]
}
```

### استخراج تفاصيل سيارة محددة

```
GET /scrape/:id
```

حيث `:id` هو معرف السيارة، مثل `12345~US`.

**الاستجابة**:
```json
{
  "message": "Vehicle details scraped successfully.",
  "vehicleId": "12345~US",
  "data": {
    "title": "2019 TOYOTA CAMRY LE",
    "vin": "4T1B11HK5KU123456",
    "lotNumber": "12345",
    "odometer": "45,000 mi (Actual)",
    "primaryDamage": "Front End",
    "retailValue": "$18,500",
    "images": [
      "https://example.com/image1.jpg",
      "https://example.com/image2.jpg"
    ],
    ...
  }
}
```

## واجهة المستخدم

يمكن الوصول إلى واجهة المستخدم عبر الصفحة الرئيسية:

```
http://localhost:3000/
```

وتتيح الواجهة:
1. تحميل قائمة السيارات من صفحة البحث
2. عرض تفاصيل سيارة محددة عبر إدخال معرف السيارة
3. عرض الصور وتفاصيل السيارة بطريقة منظمة

## هيكل المشروع

```
iaai-scraper/
├── main_scrapper/             # منطق الاستخراج الرئيسي
│   ├── core_scraper.js        # تنسيق عملية الاستخراج الرئيسية
│   └── vehicle_details_scraper.js  # استخراج تفاصيل السيارة
├── scrapper_utils/           # أدوات مساعدة للاستخراج
│   ├── browser_utils.js      # إدارة المتصفح
│   ├── navigation_utils.js   # التنقل بين الصفحات
│   └── scraper_logic.js      # منطق استخراج البيانات
├── public/                   # ملفات واجهة المستخدم
│   ├── index.html            # صفحة الواجهة الرئيسية
│   ├── styles.css            # أنماط CSS
│   └── script.js             # منطق JavaScript للواجهة
├── cookies.json              # ملف اختياري للكوكيز
├── server.js                 # نقطة الدخول للتطبيق
├── package.json              # تبعيات المشروع
└── README.md                # توثيق المشروع
```

## الملاحظات والتحذيرات

- هذا المشروع مخصص لأغراض تعليمية فقط.
- تأكد من الامتثال لشروط خدمة موقع IAAI وقوانين الاستخدام قبل استخدام هذا البرنامج.
- قد يتم تعديل هيكل موقع IAAI في أي وقت، مما قد يتطلب تحديث محركات الاستخراج.
- تجنب القيام بالكثير من طلبات الاستخراج في فترة قصيرة لتجنب الحظر المحتمل من الموقع.

## المساهمة

يرحب بالمساهمات والتحسينات. يُرجى اتباع الخطوات العادية:

1. استنساخ المستودع
2. إنشاء فرع جديد للميزة أو الإصلاح
3. إجراء التغييرات
4. إرسال طلب سحب

## الترخيص

هذا المشروع مُرخص بموجب ترخيص MIT. 